<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Instituto Reciclar</title>
    <link rel="icon" href="../img/Reciclar_Logo_Principal_Vertical_Positivo.png" type="image/png">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" crossorigin="anonymous">
    <link rel="stylesheet" href="home.css">
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
</head>
<body>

    <!-- Barra de navegação -->
<nav class="navbar">
    <div class="container">
        <div class="navbar-logo"><img src="../img/Reciclar-Logo adm(1).png" alt="Logo-Instituto-Reciclar" width="215px" height="90px"></div>

        <nav class="navbar navbar-expand-lg">
            <div class="container-fluid">
                <div class="navbar-menu" id="navbarMenu">
                <ul class="navbar-nav">
                    <li><a href="../Cadastro/cadastro.html">Cadastrar Compras</a></li>
                    <li><a href="../Cadastro_Ref_Servidas/cadastro_refeições_servidas.html">Cadastro de Refeições</a></li>
                    <li><a href="../ListadeCompras/index.html">Lista de Compras</a></li>
                    <li><a href="../Relatorios/relatorios.html">Relatórios</a></li>
                    <li><a href="../Retirada/retirada.html">Retiradas</a></li>
                </ul>
            </div>
            </div>
          </nav>
        <div class="navbar-user">
            <a href="../Perfil_User/perfiluser.html" class="user-menu"><img src="../img/user-png-icon-user-2-icon-png-file-512x512-pixel-512.png" id="img-user"/></a>
        </div>
            <nav id="nav">
              <button aria-label="Abrir Menu" id="btn-mobile" aria-haspopup="true" aria-controls="menu" aria-expanded="false">
                <span id="hamburger"></span>
              </button>
              <ul id="menu" role="menu">
                <li><a href="../Cadastro/cadastro.html">Cadastrar Compras</a></li>
                <li><a href="../Cadastro_Ref_Servidas/cadastro_refeições_servidas.html">Cadastro de Refeições</a></li>
                <li><a href="#">Manutenção Cozinha</a></li>
                <li><a href="../Relatorios/relatorios.html">Relatórios</a></li>
                <li><a href="../Retirada/retirada.html">Retiradas</a></li>
                <li><a href="../Perfil_User/perfiluser.html">Meu Perfil</a></li>
            </ul>
        </nav>
    </div>
</nav>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js" integrity="sha384-YvpcrYf0tY3lHB60NNkmXc5s9fDVZLESaAA55NDzOxhy9GkcIdslK1eN7N6jIeHz" crossorigin="anonymous"></script>

<!-- Carrossel de Relatórios -->

<div id="carouselExampleInterval" class="carousel slide" data-bs-ride="carousel">
    <div class="carousel-inner">
        <!-- Relatório de Proteínas -->
        <div class="carousel-item active" id="relatorio-proteina" data-bs-interval="10000">
            <br><br><br>
            <h2>Relatório de Proteínas</h2>
            <div id="relatorioProteina"></div>
            <canvas id="graficoProteina" width="400" height="200"></canvas>
            <button id="PDF" onclick="editarRelatorio('proteina')">Editar</button>
            <button id="PDF" onclick="salvarPDF('proteina')">Salvar em PDF</button>
            <button id="PDF" onclick="salvarExcel('proteina')">Salvar em Excel</button>
        </div>
        <!-- Relatório de Mantimentos -->
        <div class="carousel-item" id="relatorio-mantimento" data-bs-interval="10000">
            <br><br><br>
            <h2>Relatório de Mantimentos</h2>
            <div id="relatorioMantimento"></div>
            <canvas id="graficoMantimento" width="400" height="200"></canvas>
            <button id="PDF" onclick="editarRelatorio('mantimento')">Editar</button>
            <button id="PDF" onclick="salvarPDF('mantimento')">Salvar em PDF</button>
            <button id="PDF" onclick="salvarExcel('mantimento')">Salvar em Excel</button>
        </div>
        <!-- Relatório de Hortaliças -->
        <div class="carousel-item" id="relatorio-hortalica" data-bs-interval="10000">
            <br><br><br>
            <h2>Relatório de Hortaliças</h2>
            <div id="relatorioHortalica"></div>
            <canvas id="graficoHortalica" width="400" height="200"></canvas>
            <button id="PDF" onclick="editarRelatorio('hortalica')">Editar</button>
            <button id="PDF" onclick="salvarPDF('hortalica')">Salvar em PDF</button>
            <button id="PDF" onclick="salvarExcel('hortalica')">Salvar em Excel</button>
        </div>
        <!-- Relatório de Doações Recebidas -->
        <div class="carousel-item" id="relatorio-doacoes" data-bs-interval="10000">
            <br><br><br>
            <h2>Relatório de Doações Recebidas</h2>
            <div id="relatorioDoacoes"></div>
            <canvas id="graficoDoacoes" width="400" height="200"></canvas>
            <button id="PDF" onclick="editarRelatorio('doacoes')">Editar</button>
            <button id="PDF" onclick="salvarPDF('doacoes')">Salvar em PDF</button>
            <button id="PDF" onclick="salvarExcel('doacoes')">Salvar em Excel</button>
        </div>
        <!-- Relatório de Refeições Servidas -->
        <div class="carousel-item" id="relatorio-refeicoes" data-bs-interval="10000">
            <br><br><br>
            <h2>Relatório de Refeições Servidas</h2>
            <div id="relatorioRefeicoes"></div>
            <canvas id="graficoRefeicoes" width="400" height="200"></canvas>
            <button id="PDF" onclick="editarRelatorio('refeicoes')">Editar</button>
            <button id="PDF" onclick="salvarPDF('refeicoes')">Salvar em PDF</button>
            <button id="PDF" onclick="salvarExcel('refeicoes')">Salvar em Excel</button>
        </div>
    </div>
    <!-- Controle do carrossel -->
    <button class="carousel-control-prev" type="button" data-bs-target="#carouselExampleInterval" data-bs-slide="prev">
        <span class="carousel-control-prev-icon" aria-hidden="true"></span>
        <span class="visually-hidden">Previous</span>
    </button>
    <button class="carousel-control-next" type="button" data-bs-target="#carouselExampleInterval" data-bs-slide="next">
        <span class="carousel-control-next-icon" aria-hidden="true"></span>
        <span class="visually-hidden">Next</span>
    </button>
</div>

<script src="https://cdnjs.cloudflare.com/ajax/libs/xlsx/0.17.1/xlsx.full.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.4.0/jspdf.umd.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.11.8/dist/umd/popper.min.js" integrity="sha384-I7E8VVD/ismYTF4hNIPjVp/Zjvgyol6VFvRkX/vR+Vc4jQkC+hVqc2pM8ODewa9r" crossorigin="anonymous"></script>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.min.js" integrity="sha384-0pUGZvbkm6XF6gxjEnlmuGrJXVbNuzT9qBBavbLwCsOGabYfZo0T0to5eqruptLy" crossorigin="anonymous"></script>

<script>
const dadosRelatorio = {
    proteina: [
        { sku: 'SKU001', proteina: 'Whey Protein', tipo: 'Pó', dataCadastro: '2024-06-01', dataVencimento: '2024-06-30', fornecedor: 'Fornecedor A', valorUnitario: 60.00, valorTotal: 150.00 },
        { sku: 'SKU002', proteina: 'Caseína', tipo: 'Pó', dataCadastro: '2024-06-10', dataVencimento: '2024-07-10', fornecedor: 'Fornecedor B', valorUnitario: 80.00, valorTotal: 80.00 },
        { sku: 'SKU003', proteina: 'Albumina', tipo: 'Pó', dataCadastro: '2024-06-15', dataVencimento: '2024-07-15', fornecedor: 'Fornecedor C', valorUnitario: 60.00, valorTotal: 30.00 }
    ],
    mantimento: [
        { SKU: '001', Mantimento: 'Arroz', Fornecedor: 'Fornecedor 1', QuantKG: 50, UnidadeMedida: 'kg', ValorUnitario: 1, ValorTotal: 50, DataCadastro: '2024-01-01', DataVencimento: '2024-06-01' },
        { SKU: '002', Mantimento: 'Feijão', Fornecedor: 'Fornecedor 2', QuantKG: 30, UnidadeMedida: 'kg', ValorUnitario: 1, ValorTotal: 30, DataCadastro: '2024-01-10', DataVencimento: '2024-07-10' },
        { SKU: '003', Mantimento: 'Macarrão', Fornecedor: 'Fornecedor 3', QuantKG: 20, UnidadeMedida: 'kg', ValorUnitario: 0.5, ValorTotal: 10, DataCadastro: '2024-02-01', DataVencimento: '2024-08-01' },
        { SKU: '004', Mantimento: 'Farinha', Fornecedor: 'Fornecedor 4', QuantKG: 25, UnidadeMedida: 'kg', ValorUnitario: 1, ValorTotal: 25, DataCadastro: '2024-03-01', DataVencimento: '2024-09-01' }
    ],
    hortalica: [
        { SKU: '001', Hortalicas: 'Alface Amaricano', Fornecedor: 'Fornecedor 1', QuantKG: 50,  Tipo: "Verdura", UnidadeMedida: 'kg', ValorUnitario: 1, ValorTotal: 50, DataCadastro: '2024-01-01', DataVencimento: '2024-06-01' },
        { SKU: '002', Hortalicas: 'Maçã', Fornecedor: 'Fornecedor 2', QuantKG: 30,  Tipo: "Fruta", UnidadeMedida: 'kg', ValorUnitario: 1, ValorTotal: 30, DataCadastro: '2024-01-10', DataVencimento: '2024-07-10' },
        { SKU: '003', Hortalicas: 'Beringela', Fornecedor: 'Fornecedor 3', QuantKG: 20, Tipo: "Legumes" , UnidadeMedida: 'kg', ValorUnitario: 0.5, ValorTotal: 10, DataCadastro: '2024-02-01', DataVencimento: '2024-08-01' },
],
    doacoes: [  
        { SKU: '001', Produto: 'Arroz', Fornecedor: 'Fornecedor 1', QuantKG: 50, UnidadeMedida: 'kg', PesoUnitario: 1, PesoTotal: 50, DataCadastro: '2024-01-01', DataVencimento: '2024-06-01' },
        { SKU: '002', Produto: 'Feijão', Fornecedor: 'Fornecedor 2', QuantKG: 30, UnidadeMedida: 'kg', PesoUnitario: 1, PesoTotal: 30, DataCadastro: '2024-01-10', DataVencimento: '2024-07-10' },
        { SKU: '003', Produto: 'Macarrão', Fornecedor: 'Fornecedor 3', QuantKG: 20, UnidadeMedida: 'kg', PesoUnitario: 0.5, PesoTotal: 10, DataCadastro: '2024-02-01', DataVencimento: '2024-08-01' },
        { SKU: '004', Produto: 'Farinha', Fornecedor: 'Fornecedor 4', QuantKG: 25, UnidadeMedida: 'kg', PesoUnitario: 1, PesoTotal: 25, DataCadastro: '2024-03-01', DataVencimento: '2024-09-01' }
],
    refeicoes: [
        { TurmaFuncionario: 'Turma 1', quantidadeCafedamanha: 30, quantidadeAlmoco: 25, quantidadeLanchedatarde: 20, quantidadeJantar: 15, dataConsumo: '2024-06-01' },
        { TurmaFuncionario: 'Funcionarios', quantidadeCafedamanha: 40, quantidadeAlmoco: 35, quantidadeLanchedatarde: 30, quantidadeJantar: 25, dataConsumo: '2024-06-02' },
        { TurmaFuncionario: 'Turma 3', quantidadeCafedamanha: 50, quantidadeAlmoco: 45, quantidadeLanchedatarde: 40, quantidadeJantar: 35, dataConsumo: '2024-06-03' },
        { TurmaFuncionario: 'Funcionarios', quantidadeCafedamanha: 60, quantidadeAlmoco: 55, quantidadeLanchedatarde: 50, quantidadeJantar: 45, dataConsumo: '2024-06-04' }
    ]
};
function gerarGrafico(tipo, canvasId) {
    const ctx = document.getElementById(canvasId).getContext('2d');
    const dados = dadosRelatorio[tipo];

    // Transformar dados em formato de gráfico
    const labels = dados.map(item => item.SKU || item.SKU);
    const valores = dados.map(item => item.ValorTotal || item.pesoTotal || item.quantidadeCafedamanha || item.quantidadeAlmoco || item.quantidadeLanchedatarde || item.quantidadeJantar);

    new Chart(ctx, {
        type: 'pie',
        data: {
            labels: labels,
            datasets: [{
                label: `Total ${tipo.charAt(0).toUpperCase() + tipo.slice(1)}`,
                data: valores,
                backgroundColor: 'rgba(75, 192, 192, 0.2)',
                borderColor: 'rgba(75, 192, 192, 1)',
                borderWidth: 1
            }]
        },
        options: {
            scales: {
                y: {
                    beginAtZero: true
                }
            }
        }
    });
}

function exibirRelatorios() {
    gerarGrafico('proteina', 'graficoProteina');
    gerarGrafico('mantimento', 'graficoMantimento');
    gerarGrafico('hortalica', 'graficoHortalica');
    gerarGrafico('doacoes', 'graficoDoacoes');
    gerarGrafico('relatorio-refeicoes', 'graficoRefeicoes');
}

document.addEventListener('DOMContentLoaded', exibirRelatorios);
</script>
</body>
</html>
